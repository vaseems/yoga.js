<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Yoga.js Documentation</title>
    <link rel="preconnect" href="https://unpkg.com" crossorigin>
    <style>
        :root {
            --bg: #0b0d15;
            --fg: #e9eefb;
            --muted: #9fb0d0;
            --brand: #7cf4e0;
            --brand-2: #7c9cf4;
            --border: rgba(255, 255, 255, 0.1);
            --card: #12172a;
        }

        body {
            margin: 0;
            display: flex;
            height: 100vh;
            background: var(--bg);
            font-family: Inter, ui-sans-serif, system-ui;
            color: var(--fg);
            overflow: hidden;
        }

        canvas#scene {
            position: fixed;
            inset: 0;
            z-index: 0;
        }

        /* Sidebar */
        .sidebar {
            width: 260px;
            background: rgba(14, 19, 33, 0.9);
            border-right: 1px solid var(--border);
            overflow-y: auto;
            padding: 20px;
            position: relative;
            z-index: 2;
            backdrop-filter: blur(10px);
        }

        .sidebar h2 {
            font-size: 14px;
            text-transform: uppercase;
            color: var(--muted);
            margin: 20px 0 10px;
        }

        .method {
            padding: 8px 10px;
            border-radius: 8px;
            cursor: pointer;
            color: var(--fg);
        }

        .method:hover {
            background: rgba(124, 244, 224, 0.08);
        }

        .method.active {
            background: rgba(124, 244, 224, 0.15);
            color: var(--brand);
        }

        /* Main content */
        .main {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            padding: 30px;
            position: relative;
            z-index: 2;
        }

        .doc-card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
            transform-style: preserve-3d;
            transition: transform .25s ease;
        }

        .doc-card:hover {
            border-color: rgba(124, 244, 224, 0.3);
        }

        h1 {
            margin-top: 0;
            font-size: 28px;
        }

        pre {
            background: #0c1122;
            padding: 14px;
            border-radius: 10px;
            overflow: auto;
            font-family: monospace;
            font-size: 14px;
            color: #cfe9ff;
        }

        .playground {
            margin-top: 20px;
        }

        textarea {
            width: 100%;
            height: 120px;
            background: #0c1122;
            color: #cfe9ff;
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 10px;
            font-family: monospace;
            font-size: 14px;
        }

        .btn {
            margin-top: 10px;
            padding: 10px 16px;
            border-radius: 10px;
            border: 1px solid var(--border);
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.06), rgba(255, 255, 255, 0.02));
            color: var(--fg);
            font-weight: 600;
            cursor: pointer;
        }

        .btn:hover {
            border-color: rgba(124, 244, 224, 0.3);
            color: var(--brand);
        }

        .output {
            margin-top: 10px;
            background: #0c1122;
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 10px;
            min-height: 60px;
            font-family: monospace;
            color: #7cf4e0;
        }

        .doc-card {
            position: relative;
            overflow: hidden;
            transform-style: preserve-3d;
            transition: transform .25s ease, box-shadow .25s ease, border-color .25s ease;
        }

        .doc-card:hover {
            border-color: rgba(124, 244, 224, 0.35);
            box-shadow: 0 40px 80px rgba(0, 0, 0, 0.45), 0 0 0 1px rgba(124, 244, 224, 0.08) inset;
        }

        .doc-card .shine {
            position: absolute;
            inset: -40%;
            background: radial-gradient(400px 220px at var(--mx, 50%) var(--my, 50%),
                    rgba(124, 244, 224, 0.15),
                    rgba(124, 156, 244, 0.06) 40%,
                    transparent 70%);
            mix-blend-mode: screen;
            pointer-events: none;
            transition: opacity .25s ease;
            opacity: .8;
        }
    </style>
    <script src="yoga.js"></script>

</head>

<body>
    <canvas id="scene"></canvas>

    <aside class="sidebar">
        <h2>Array</h2>
        <div class="method active" data-method="contains">contains()</div>
        <div class="method" data-method="iterator">iterator()</div>
        <div class="method" data-method="concatAll">concatAll()</div>
        <div class="method" data-method="apply">apply()</div>
        <div class="method" data-method="truthy">truthy()</div>
        <div class="method" data-method="difference">difference()</div>
        <div class="method" data-method="differenceBy">differenceBy()</div>
        <div class="method" data-method="unique">unique()</div>
        <div class="method" data-method="flatten">flatten()</div>
        <div class="method" data-method="groupBy">groupBy()</div>
        <div class="method" data-method="chunk">chunk()</div>
        <div class="method" data-method="intersection">intersection()</div>


        <h2>Object</h2>
        <div class="method" data-method="objSize">objSize()</div>
        <div class="method" data-method="entries">entries()</div>
        <div class="method" data-method="mapValues">mapValues()</div>
        <div class="method" data-method="pick">pick()</div>
        <div class="method" data-method="omit">omit()</div>
        <div class="method" data-method="deepClone">deepClone()</div>


        <h2>String</h2>
        <div class="method" data-method="capitalize">capitalize()</div>
        <div class="method" data-method="reverse">reverse()</div>
        <div class="method" data-method="camelCase">camelCase()</div>


        <h2>Number</h2>
        <div class="method" data-method="clamp">clamp()</div>
        <div class="method" data-method="toCurrency">toCurrency()</div>


        <h2>Date</h2>
        <div class="method" data-method="format">format()</div>
        <div class="method" data-method="addDays">addDays()</div>


        <h2>Function</h2>
        <div class="method" data-method="memoize">memoize()</div>
        <div class="method" data-method="curry">curry()</div>
        <div class="method" data-method="debounce">debounce()</div>
        <div class="method" data-method="throttle">throttle()</div>
    </aside>

    <main class="main">
        <div class="doc-card" id="doc">
            <h1>concat()</h1>
            <p><strong>Description:</strong> Returns a new array that is the result of merging two or more arrays.</p>
            <pre><code>const a = [1,2,3];
const b = [4,5];
const all = a.concat(b);
// ➜ [1,2,3,4,5]</code></pre>

            <div class="playground">
                <textarea id="code">// Try it yourself
const a = [10,20];
const b = [30,40];
a.concat(b);</textarea>
                <button class="btn" id="run">Run ▶</button>
                <div class="output" id="output"></div>
            </div>
        </div>
    </main>

    <!-- Three.js + GSAP -->
    <script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>
    <script src="https://unpkg.com/gsap@3.12.5/dist/gsap.min.js"></script>
    <script>
        // Sidebar navigation
        const methods = {
            // Array
            contains: { title: "contains()", desc: "Checks if array contains element.", example: `[1,2,3].contains(2);//true`, starter: `[1,2,3].contains(2);` },
            iterator: { title: "iterator()", desc: "Creates iterator with hasNext/next.", example: `const it=[1,2,3].iterator();\nwhile(it.hasNext()) console.log(it.next());`, starter: `const it=[1,2,3].iterator();\nwhile(it.hasNext()) console.log(it.next());` },
            concatAll: { title: "concatAll()", desc: "Concatenates arrays.", example: `[1,2].concatAll([3,4]); // [1,2,3,4]`, starter: `[1,2].concatAll([3,4]);` },
            apply: { title: "apply()", desc: "Maps with operation.", example: `[1,2,3].apply(x=>x*2);//[2,4,6]`, starter: `[1,2,3].apply(x=>x*2);` },
            truthy: { title: "truthy()", desc: "Filters truthy values.", example: `[0,1,false,2].truthy();//[1,2]`, starter: `[0,1,false,2].truthy();` },
            difference: { title: "difference()", desc: "Symmetric difference between arrays.", example: `[1,2,3].difference([2,3,4]);//[1,4]`, starter: `[1,2,3].difference([2,3,4]);` },
            differenceBy: { title: "differenceBy()", desc: "Difference by function mapper.", example: `[2.1,1.2].differenceBy([2.3],Math.floor);//[1.2]`, starter: `[2.1,1.2].differenceBy([2.3],Math.floor);` },
            unique: { title: "unique()", desc: "Removes duplicates.", example: `[1,1,2].unique();//[1,2]`, starter: `[1,1,2].unique();` },
            flatten: { title: "flatten()", desc: "Flattens nested arrays.", example: `[1,[2,[3]]].flatten(2);//[1,2,3]`, starter: `[1,[2,[3]]].flatten(2);` },
            groupBy: { title: "groupBy()", desc: "Groups by key fn.", example: `[6.1,4.2,6.3].groupBy(Math.floor);//{6:[6.1,6.3],4:[4.2]}`, starter: `[6.1,4.2,6.3].groupBy(Math.floor);` },
            chunk: { title: "chunk()", desc: "Splits into chunks.", example: `[1,2,3,4].chunk(2);//[[1,2],[3,4]]`, starter: `[1,2,3,4].chunk(2);` },
            intersection: { title: "intersection()", desc: "Common elements.", example: `[1,2,3].intersection([2,3,4]);//[2,3]`, starter: `[1,2,3].intersection([2,3,4]);` },


            // Object
            objSize: { title: "objSize()", desc: "Count keys in object.", example: `({a:1,b:2}).objSize();//2`, starter: `({a:1,b:2}).objSize();` },
            entries: { title: "entries()", desc: "Returns entries array.", example: `({a:1}).entries();//[["a",1]]`, starter: `({a:1}).entries();` },
            mapValues: { title: "mapValues()", desc: "Map object values.", example: `({a:1,b:2}).mapValues(v=>v*2);//{a:2,b:4}`, starter: `({a:1,b:2}).mapValues(v=>v*2);` },
            pick: { title: "pick()", desc: "Select keys.", example: `({a:1,b:2}).pick(["a"]);//{a:1}`, starter: `({a:1,b:2}).pick(["a"]);` },
            omit: { title: "omit()", desc: "Remove keys.", example: `({a:1,b:2}).omit(["a"]);//{b:2}`, starter: `({a:1,b:2}).omit(["a"]);` },
            deepClone: { title: "deepClone()", desc: "Deep clone object.", example: `const o={a:1}; const c=o.deepClone();`, starter: `({a:{b:1}}).deepClone();` },


            // String
            capitalize: { title: "capitalize()", desc: "Uppercase first letter.", example: `"hello".capitalize();//"Hello"`, starter: `"hello world".capitalize();` },
            reverse: { title: "reverse()", desc: "Reverses string.", example: `"abc".reverse();//"cba"`, starter: `"hello".reverse();` },
            camelCase: { title: "camelCase()", desc: "Converts to camelCase.", example: `"hello_world".camelCase();//"helloWorld"`, starter: `"hello_world".camelCase();` },


            // Number
            clamp: { title: "clamp()", desc: "Clamps number.", example: `(5).clamp(1,10);//5`, starter: `(20).clamp(0,10);` },
            toCurrency: { title: "toCurrency()", desc: "Formats currency.", example: `(1234.56).toCurrency("en-US","USD");//"$1,234.56"`, starter: `(1234.56).toCurrency("en-US","USD");` },


            // Date
            format: { title: "format()", desc: "Formats date.", example: `new Date(2020,0,1).format();//"2020-01-01 00:00:00"`, starter: `new Date().format();` },
            addDays: { title: "addDays()", desc: "Adds days.", example: `new Date().addDays(5);`, starter: `new Date().addDays(5);` },


            // Function
            memoize: { title: "memoize()", desc: "Caches function results.", example: `const f=(n)=>n*2; const m=f.memoize(); m(2);//4`, starter: `const f=(n)=>n*2; const m=f.memoize(); m(10);` },
            curry: { title: "curry()", desc: "Curries function.", example: `function add(a,b){return a+b;} const c=add.curry(2); c(3);//5`, starter: `function add(a,b){return a+b;} const c=add.curry(2); c(5);` },
            debounce: { title: "debounce()", desc: "Delays fn call.", example: `const log=(()=>console.log("hi")).debounce(500); log();`, starter: `const log=(()=>console.log("hi")).debounce(500); log();` },
            throttle: { title: "throttle()", desc: "Limits fn call rate.", example: `const log=(()=>console.log("tick")).throttle(1000); setInterval(log,200);`, starter: `const log=(()=>console.log("tick")).throttle(1000); setInterval(log,200);` }
        };
        document.querySelectorAll('.method').forEach(el => {
            el.addEventListener('click', () => {
                document.querySelectorAll('.method').forEach(m => m.classList.remove('active'));
                el.classList.add('active');
                const m = methods[el.dataset.method];
                const doc = document.getElementById('doc');
                doc.innerHTML = `
          <h1>${m.title}</h1>
          <p><strong>Description:</strong> ${m.desc}</p>
          <pre><code>${m.example}</code></pre>
          <div class="playground">
            <textarea id="code">${m.starter}</textarea>
            <button class="btn" id="run">Run ▶</button>
            <div class="output" id="output"></div>
          </div>`;
                attachRunner();
                gsap.from(doc, { y: 30, opacity: 0, duration: 0.6, ease: "power2.out" });
            });
        });
        function attachRunner() {
            document.getElementById('run').addEventListener('click', () => {
                const code = document.getElementById('code').value;

                // Capture logs
                let logs = [];
                const originalLog = console.log;
                console.log = (...args) => {
                    logs.push(args.map(a =>
                        typeof a === "object" ? JSON.stringify(a) : String(a)
                    ).join("\n"));
                    originalLog.apply(console, args); // still log to browser console
                };

                try {
                    const result = eval(code);
                    if (logs.length > 0) {
                        document.getElementById('output').innerHTML = logs.join("<BR>");
                    } else {
                        document.getElementById('output').textContent =
                            result === undefined ? "✓ Executed" : JSON.stringify(result);
                    }
                } catch (e) {
                    document.getElementById('output').textContent = "Error: " + e.message;
                } finally {
                    // Restore original console.log
                    console.log = originalLog;
                }
            });
        }
        attachRunner();

        // --- Three.js background ---
        const canvas = document.getElementById('scene');
        const renderer = new THREE.WebGLRenderer({ canvas, antialias: true, alpha: true });
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(60, innerWidth / innerHeight, 0.1, 100);
        camera.position.set(0, 0, 8);

        function resize() {
            const dpr = Math.min(2, window.devicePixelRatio || 1);
            renderer.setPixelRatio(dpr);
            renderer.setSize(innerWidth, innerHeight);
            camera.aspect = innerWidth / innerHeight;
            camera.updateProjectionMatrix();
        }
        window.addEventListener('resize', resize);
        resize();

        // Fog
        scene.fog = new THREE.FogExp2(0x0a0d19, 0.06);

        // Particle rings
        const particleGroup = new THREE.Group();
        scene.add(particleGroup);

        const particleMat = new THREE.PointsMaterial({
            color: 0x7cf4e0,
            size: 0.04,
            transparent: true,
            opacity: 0.85,
            depthWrite: false
        });

        function ring(radius, count, jitter = 0.18) {
            const geo = new THREE.BufferGeometry();
            const positions = new Float32Array(count * 3);
            for (let i = 0; i < count; i++) {
                const t = (i / count) * Math.PI * 2;
                const r = radius + (Math.random() - 0.5) * jitter;
                const x = Math.cos(t) * r + (Math.random() - 0.5) * 0.15;
                const y = (Math.random() - 0.5) * 0.25;
                const z = Math.sin(t) * r + (Math.random() - 0.5) * 0.15;
                positions.set([x, y, z], i * 3);
            }
            geo.setAttribute('position', new THREE.BufferAttribute(positions, 3));
            const pts = new THREE.Points(geo, particleMat.clone());
            pts.material.color = new THREE.Color().setHSL(0.52 + Math.random() * 0.08, 0.9, 0.7);
            pts.rotation.x = Math.random() * 0.6 - 0.3;
            pts.rotation.y = Math.random() * 0.6 - 0.3;
            return pts;
        }

        const rings = [ring(1.2, 180), ring(2.0, 220), ring(3.2, 300), ring(4.4, 380)];
        rings.forEach((r, i) => { r.material.size = 0.035 + i * 0.01; particleGroup.add(r); });

        // Wireframe capsule centerpiece
        const capsule = new THREE.Mesh(
            new THREE.CapsuleGeometry(0.65, 1.6, 8, 16),
            new THREE.MeshBasicMaterial({ color: 0x7c9cf4, wireframe: true, transparent: true, opacity: 0.25 })
        );
        scene.add(capsule);

        // Lights
        const light1 = new THREE.PointLight(0x7cf4e0, 6, 10);
        light1.position.set(2, 1.2, 2);
        scene.add(light1);
        const light2 = new THREE.PointLight(0x7c9cf4, 5, 10);
        light2.position.set(-2, -1.2, -1);
        scene.add(light2);

        // Animate
        let t = 0;
        function animate() {
            t += 0.005;
            rings.forEach((r, i) => {
                r.rotation.y += 0.001 + i * 0.0004;
                r.rotation.z += 0.0007;
            });
            capsule.rotation.x = Math.sin(t * 0.6) * 0.15 + 0.2;
            capsule.rotation.y += 0.004;
            particleGroup.position.y = Math.sin(t * 0.8) * 0.08;
            renderer.render(scene, camera);
            requestAnimationFrame(animate);
        }
        animate();

        // Parallax camera
        let mx = 0, my = 0;
        window.addEventListener('pointermove', e => {
            const x = (e.clientX / innerWidth) - 0.5;
            const y = (e.clientY / innerHeight) - 0.5;
            mx = x; my = y;
        });
        gsap.ticker.add(() => {
            camera.position.x += (mx * 0.8 - camera.position.x) * 0.04;
            camera.position.y += (-(my * 0.6) - camera.position.y) * 0.04;
            camera.lookAt(0, 0, 0);
        });

        // --- GSAP animations ---
        gsap.from('.sidebar', { x: -40, opacity: 0, duration: 0.8, ease: 'power2.out' });
        gsap.from('.doc-card', { y: 30, opacity: 0, duration: 0.8, delay: 0.2, ease: 'power2.out' });

        // Tilt + shine for doc-card
        function enableTilt(card) {
            // Add shine layer
            const shine = document.createElement('div');
            shine.className = 'shine';
            card.appendChild(shine);

            card.addEventListener('pointermove', e => {
                const r = card.getBoundingClientRect();
                const x = (e.clientX - r.left) / r.width;
                const y = (e.clientY - r.top) / r.height;
                const rx = (y - 0.5) * -10;
                const ry = (x - 0.5) * 14;
                card.style.transform = `rotateX(${rx}deg) rotateY(${ry}deg) translateZ(0)`;
                card.style.setProperty('--mx', `${x * 100}%`);
                card.style.setProperty('--my', `${y * 100}%`);
            });

            card.addEventListener('pointerleave', () => {
                card.style.transform = 'rotateX(0deg) rotateY(0deg) translateZ(0)';
            });
        }

        // Apply to all doc-cards
        document.querySelectorAll('.doc-card').forEach(enableTilt);
    </script>